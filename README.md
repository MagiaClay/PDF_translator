# SH MP文档翻译程序
![visitors](https://visitor-badge.glitch.me/badge?page_id=jtl1207.comic-translation&left_text=访%20%20问)  
这是一个基于深度学习的翻译工具
包含OCR识别，PDF拆分，AI图像去字，自动排版，自动嵌字，结合LLM翻译等功能。

目的是帮助组内翻译人员完成翻译任务更简单，快速的翻译任务。也可以用于加快专业翻译流程。

ps：机翻有待加强，目前对横向文本支持较好，垂直文本非中文容易出现问题，且大语言模型还未部署。
## 安装
开发者直接git  
注意paddle，pytorch，tensorflow2（暂可不用） 需要官网下载，任意版本。    
注意30系显卡不支持cuda10.2。
模型checkpoint需要联网下载最新版本，或者使用本地上传保存的版本。

为了更好的显示错误原因，整合包保留了控制台（2024.06.28控制台已disable）。 

目前翻译功能使用Baidu翻译的API进行翻译，限制为100,000/tokens_per_month，注意使用限制

```diff
! 第一次运行程序需要联网下载model参数
！请在确认PaddleOCR和LayoutParser正常运作后使用  
! 尽量维持原先目录结构，数据统一存放在'D:/testPics/'下，git后可改变该路径
```  

## 更新
【2024.07.02】解决了部分闪退问题；优化了工作流，可以实时保存任务进度


## 使用方法
1.先运行ver2.0.py脚本，脚本输入为需要翻译的PDF文档的绝对路径，输出结果为PDF保存在/OCRtranslated/  
2.打开main.py  
3.导入/OCRtranslated/文件下的翻译过 
4.设置要翻译的语言（暂时只支持En）  
5.手动选择区域，选择需要的功能  
6.手动修改译文，点击确定

7.单张翻译完后点击下一张，翻译结果会自动以PDF形式保存在/out/下
  
扫描图片不清晰，图片太小,准确度会下降
使用相同颜色阴影可以加粗字体，需要的字体可以自己导入，支持.ttf格式字体  
如果发生闪退等意外缓存的图片已经保存，只需要再次打开即可  

根据电脑配置运行速度不同，可能会出现卡顿，目前使用的是CPU版本  
  
报错处理:  
短时间卡顿是正常现象  
翻译超时请检测与Baidu_translaion网络连接
请联系相关技术人员  
  
环境要求:  
暂时需要网络,使用Baidu翻译(中国)  
提示：ssr可能造成网络异常，请自行尝试  
有显卡可显著加快图像处理速度(CUDA)  
cpu会非常慢  
需要驱动版本>=472.50  
整合包自带CUDA与cudnn不需要额外安装  

